|==================|
|= CHANGELOG GRR  =|
|==================|

GRR-1.9.3a
==============================

Nouvelles fonctionnalités
-------------------------
- Possibilité de paramétrage du fuseau horaire dans config.inc.php(imposer à GRR un fuseau horaire différent de celui du serveur)

Corrections de bugs
-------------------
bonjour,
- Dans les messages automatiques, certains caractères spéciaux apparaissaient sous la forme d'entités HTML peu lisibles.
- Correction d'un pb d'affichage apparu avec la version 1.9.3. si réservation sur plusieurs jours d'une ressource, l'affichage de la semaine pour cette ressource présente des bugs.
- Correction d'un bug d'affichage : dans la rubrique "configuration générale" la liste des ressources était incomplète.
- Changement de noms de plusieurs fonctions dans session.inc.php et mysqli.inc.php (ajout d'un suffixe "grr_" pour rendre compatibles sur les serveurs LCS les plugins GRR et GEPI).

GRR-1.9.3
==============================

Nouvelles fonctionnalités
-------------------------
- Nouvelle variable dans config.inc.php pour le paramétrage du fuseau horaire (permet d'mposer à GRR un fuseau horaire différent de celui du serveur).
- Ajout d’un module d'authentification SSO pour LCS permettant l'intégration et la prise en charge de GRR sur une serveur LCS (http://lcs.ac-caen.fr/).
- Ajout d'un système de surcharge des réservations afin de gérer des champs additionnels lors de la saisie ou de la consultation de réservations.
- Possibilité, domaine par domaine, de n'afficher que les jours de son choix (par exemple, ne pas afficher les samedis et dimanches).
- Possibilité de définir une url de déconnexion : lorsqu'un utilisateur se déconnecte, après fermeture de la session, le navigateur est redirigé vers la page de son choix.
- Restructuration complète de l'arborescence du programme afin de mieux prendre en compte des améliorations (css, ...)
- Dans les rapports, les noms et prénoms des utilisateurs ayant effectué des réservations apparaissent plutôt que l'identifiant.
- Dans le tableau des vues "semaine"/"Toutes les ressources pour un domaine", des liens vers
l'affichage "jour"/"Toutes les ressources" sont maintenant disponibles dans les en-têtes de jours,
ainsi que vers l'affichage "semaine"/"une_ressource" dans les en-têtes de ressources.
- Dans le tableau des vues "semaine"/"Toutes les ressources pour un domaine", des boutons dans les cellules permettent d'accéder directement à l'interface de réservation.
- Amélioration de la lisibilité des plannings "journées" et "semaine"/"une ressource" : regroupement de toutes les cellules d'une même réservation en une seule.
- Nouveau paramètre dans config.inc.php afin de permettre à un utilisateur non connecté (dans le cas ou $authentification_obli = 0) d'accéder à l'outil de recherche.
- Nouveau paramètre dans config.inc.php afin de permettre une compatibilité avec les versions de PHP inférieures à 4.3.0. (cas de la fonction mysqli_real_escape_string() disponible uniquement à partir de la version 4.3.0 de php).

Corrections de bugs
-------------------
- Coorection d'un bug dans l'affichage semaine d'une ressource : les réservations pouvaient déborder du tableau d'affichage dans certains cas.
- Dans le cas des créneaux basés sur les intitulés (et non sur le temps), il était toujours possible de réserver avant midi et impossible de réserver au delà de midi. Le bug est corrigé : il est maintenant possible de modifier/réserver/supprimer tout au long d'une journée, même si l'heure est passée. Amélioration prévue dans une prochaine version en introduisant pour chaque créneau une heure limite de réservation.
- Ajout d'un bouton "retour" lors d'une réservation erronée permettant de récupérer les données précédemment remplies sans avoir à tout ressaisir (ne fonctionne pas avec les champs complémentaires).
- Correction de problème d'affichage (help_fr.php, help_it.php) lorsque la variable d'encodage UTF-8 est activée
- Les styles des utilisateurs sont remis à zéro pour éviter le problème de CSS lors du passage de la 1.9.2 à la 1.9.3.
- Désormais, lorsque l'on fixe la plage horaire de réservations d'une ressource, si l'heure saisie de fin est inférieure à l'heure de début, elle est changée pour être égale à l'heure de début.
- Correction d'un bug lié au changement d'heure (passage à l'heure d'hiver) sur la page week.php (vue "semaine" des réservations d'une ressource) et sur la page week_all.php (vue "semaine" des réservations d'un domaine)
- Correction du javascript permettant l'affichage des périodicités. Il fonctionne désormais avec IE5/6 sur XP SP1.
- Correction d'un bug d'affichage : sur les  vues "mois", pour une ressource, il n'y avait pas le surlignage de couleur correspondant au type.
- Correction d'un bug d'affichage : dans la rubrique "gérer mon compte" la liste des ressources était incomplète.
- Correction d'un bug d'affichage : dans certaines conditions, certaines légendes de types de réservations apparaissaient en doublons en bas des plannings et dans la liste déroulante du formulaire de réservation.
- Correction d'un bug d'affichage lors de l'envoi de message automatique après suppression automatique  d'une "réservation sous réserve" non confirmée.
- Correction d'un bug dans l'édition des rapports (script report.php) constaté avec des versions anciennes de mysqli
- Correction d'un bug dans l'édition des fichiers CSV des rapports et des résumés : les critères "types" et "Créateur" n'étaient pas pris en compte.
- Correction d'un bug : le changement de nom de la session PHP dans le fichier config.inc.php (SESSION_NAME) pour une autre valeur que GRR entraînait une impossibilité de se connecter.
- Ajout des légendes des types de réservation en bas des vues semaines et mois (toutes les ressources).

GRR-1.9.2 (09/01/2006)
==============================

Nouvelles fonctionnalités
-------------------------
- Possibilité de configurer un calendrier des jours fériés : les journées de ce calendrier ne sont donc pas touchées par les réservations avec ou sans périodicité.
- Dans la page de modification des paramètres d'une ressource, l'administrateur a la possibilité d'activer la fonction « Poser des réservations sous réserve ». Dans le cas, la personne effectuant une réservation a la possibilité de remplir un champ supplémentaire : « Réservation à confirmer au plus tard le ... ». Si l'utilisateur ne confirme pas sa réservation avant la date indiquée, la réservation est automatiquement supprimée et un mail automatique est envoyé aux personnes concernées.
- Possibilité d'afficher pour un utilisateur, la liste de tous les privilèges (administration de domaines, gestion de ressources, mails automatiques, accès aux domaines restreints)
- Possibilité d'afficher pour un domaine ou une ressource, la liste de tous les utilisateurs ayant des privilèges sur celui-ci.
- Ajout de la langue Espagnole (traduction complète à 95 %)
- Compatibité UTF-8
- Possibilité de définir, ressource par ressource, en mode modif/création d'une réservation, si l'utilisateur spécifie une durée de réservation ou bien les date et heure de fin de réservation.
- Possibilité pour chaque ressource de ne pas permettre aux utilisateurs (hormis les gestionnaires et les administrateurs) de modifier ou de supprimer leurs propres réservations
- Possibilité de trier le résultat des rapports de réservation par domaine, ressource, date de début de réservation, type, créateur (identifiant) ou brève description (script report.php)
- Nouveau champ "type" dans le formulaire permettant d'éditer des rapports de réservation (report.php)
- Possibilité de définir les différents types de réservation directement en ligne (et non plus "en dur" dans le fichier config.inc.php).
- Possibilité de définir des types de réservation domaine par domaine.
- Possibilité de définir le type de créneaux par domaine : les créneaux de réservation peuvent être soient basés sur le temps (comme anciennement), soient basés sur des intitulés pré-définis (nouveau !).
- Pour une réservation effectuée sur une ressource d'un domaine, possibilité de déplacer la réservation vers une autre ressource.
- Nouveau style "volcan" (merci à Cyrille Bicorne).
- Nouveau style "argent" (merci à Frédéric Grégoire).
- Déclenchement d'emails automatiques vers le créateur et vers l'utilisateur déclaré pour les mails auto, lorsqu’une nouvelle réservation entre en conflit avec des réservations existantes et que l'administrateur du domaine force la nouvelle réservation en supprimant les réservations qui entrent en conflit.
- Titre des pages HTML affichées par les navigateurs : rajout derrière GRR du nom de l'organisme.
- Nouveau paramètre de configuration dans config.inc.php ($display_info_bulle) du contenu des "info-bulles" des réservations, dans les vues journées, semaine et mois.
- Nouveau paramètre de configuration dans config.inc.php ($correct_diff_time_local_serveur) qui permet de corriger une différence d'heure entre le serveur et les postes clients (voir explication dans config.inc.php)
- Nouveau paramètre de configuration dans config.inc.php ($correct_heure_ete_hiver) qui permet de prendre en compte ou non, les changements d'heure été/hiver
- Nouvelle taille maximale de la longueur d'un identifiant : 40 (au lieu de 20).
- Sur les plannings d'affichage par mois de toutes les réservations d'un domaine, les réservation apparaissent en couleur, selon le type de la réservation.

Corrections de bugs
-------------------
- On impose maintenant un fond blanc pour les pages au format imprimable (lorsque le navigateur est configuré pour imprimer les couleurs d'arrière-plan, le document est imprimé en couleur sur fond blanc pour économiser l'encre).
- Ajout de la table grr_j_useradmin_area dans la liste des tables à sauvegarder, dans le fichier misc.inc.php.
- Dans la page de réservation, quand on choisissait de réserver sur plusieurs jours et si on cochait la case "journée entière", seule une journée était réservée.
- Dans la page de configuration ldap (admin_config_ldap.php), un bug sur des variables faussait un test de connexion à l'annuaire ldap.
- Correction d'un bug pouvant entrainer un denis de service : envoyer autre chose qu'un nombre dans un des champs year, month, day, sur les pages d'affichage des plannings provoquait une
boucle infinie dans le code PHP.
- Révision complète du code pour corriger des failles de type SQL Injection.
- Correction d'un bug d'affichage dans les vues semaines quand 24*3600 n'était pas un multiple de la résolution choisie (en secondes).
- Correction d'un bug sur la page week_all.php (vue "semaine" de toutes les réservations d'un domaine) : lorsque deux ressources portaient le même nom dans deux domaines différents, les réservations affichées étaient erronées.
- Correction d'un bug sur la page « Gérer mon compte » : concernant la ressource à afficher par défaut, l'utilisateur voyait également s'afficher dans la liste déroulante, les domaines à accès restreint auxquels il n'avait pas accès.
- Correction d'un bug lié au changement d'heure été/hiver sur la page week.php (vue "semaine" des réservations d'une ressource) et sur la page week_all.php (vue "semaine" des réservations d'un domaine)
- Correction d'un bug dans l'affichage "semaine" de toutes les ressources (weel_all.php), lorsqu'on effectuait une réservation d'une ressource sur une durée de plusieurs jours, et à cheval sur deux mois

GRR-1.9.1 (09/01/2006)
==============================

Nouvelles fonctionnalités
-------------------------
"LemonLdapisation" de GRR : ajout d’un module d’authentification Lemonldap SSO permettant la prise en charge de GRR dans un environnement Lemonldap SSO.

Corrections de bugs
-------------------
- La valeur du champ USER_AGENT dans la table "log" est passée à 100.
- Lorqu'un administrateur modifiait le réglage de la langue par défaut, son réglage personnel était écrasé et prenait la valeur du réglage par défaut.
- Amélioration du code du fichier language.inc.php pour tenir compte de la syntaxe de la fonction setlocale des versions php < 1.3.0.
- Correction d'un bug dans la procédure de mise à jour de GRR pour des versions inférieures ou égales à 1.7.
- Correction d'un bug dans la page de modification d'une ressource : impossibilité de télécharger une image pour la ressource.

GRR-1.9 (03/01/2006)
==============================

Nouvelles fonctionnalités
-------------------------
- Nouvelle procédure permettant de réserver ou de libérer très rapidement des journées entières simultanément sur plusieurs ressources de plusieurs domaines et selon un calendrier.
- Amélioration du support ldap dans le cas de l'ActiveDirectory.
- Nouveau paramètre : pour une ressource donnée, permettre ou non les réservation dans le passé ainsi que les modifications/suppressions de réservations passées.
- Lorsqu'une nouvelle réservation entre en conflit avec des réservations existantes, les administrateur d'un domaine peuvent désormais forcer la nouvelle réservation en supprimant les réservations qui entrent en conflit.
- Possibilité de désactiver les messages "pop-up" d'information dans config.inc.php
- Amélioration de la prise en charge de l'affichage des dates en français (modification de language.inc.php.
- Ajout de la langue Italien (traduction complète à 95 %) - Contribution d'Anthony Audouard.
- Ajout d’une nouvelle feuille de style "Orange" - Contribution d'Anthony Audouard
- Gestion améliorée des messages d'avertissement (pop-up).
- Possibilité d'attribuer un ordre d'affichage des ressources à l'intérieur d'un domaine
- Amélioration de la fonction d'envoi automatique de mail (paramètre supplémentaire "parametre_additionnel" à définir dans config.inc.php). Explications dans le fichier config.inc.php.
- Possibilité de fixer, pour chaque ressource, un temps en minutes en-deça duquel l'utilisateur ne peut pas réserver ou modifier une réservation existante.
- Possibilité de fixer, pour chaque ressource, un nombre maximal de jours au-delà duquel l'utilisateur ne peut pas réserver ou modifier une réservation existante.
- Personnalisation par domaine des paramètres d'affichage du planning (heures de début et fin de journée, plus petit bloc réservable, ...)
- Nouveau paramètre dans "config.inc.php" ($nb_year_calendar) : permet de fixer la plage de choix de l'année dans le choix des dates de début et fin des réservations.
- Nouveau paramètre dans "config.inc.php" ($display_full_description) permettant d'afficher ou non la description complète de la réservation dans les vues jours, semaine et mois.
- Domaine et ressource par défaut : ajout de la possibilité de choisir l'affichage semaine des
réservations de toutes les ressources d'un domaine.
- Dans le cas de la vue des réservations de toutes les ressources d'un domaine sur un mois : possibilité d'afficher une vue supplémentaire donnant les réservations, ressource par ressource (contribution de Yannick Léa).
- Amélioration de la navigation entre les différentes vues (journée/semaine/mois).
- Amélioration du support CAS.
- Optimisation de la function authGetUserLevel qui améliore des soucis de lenteur dans le cas où il y a de nombreux utilisateurs dans la base.
- Dans le cas où une réservation est en cours d'utilisation, dans week_all.php, ajout de l'icône correspondante.


Corrections de bugs
-------------------
- Correction mineure dans l'affichage des réservations dans day.php et week.php.
- Correction de code pour rendre GRR compatible avec le navigateur SAFARI
- Correction d'un bug apparu avec la version 1.8 : l'aide n'était plus accessible quand on n'était pas connecté.
- Correction d'un bug : lorsque l'administrateur associait plus d'une ressource à un utilisateur pour l'administration, le bouton administration n'était plus visible.
- Correction d'un bug : dans le cas où la variable register_globals du fichier php.ini était positionnée sur "On" (non recommandé), la langue par défaut de l'utilisateur était mal gérée.
- Correction d'un bug : dans le cas où la variable register_globals du fichier php.ini était positionnée sur "On" (non recommandé), l'affichage des résultats de recherche au-delà de la première page ne fonctionnait pas.
- Correction d'un bug : dans le cas où il y avait changement de langue sur des pages comportant des paramètres passés dans l'url, ces paramètres n'étaient pas conservés après le changement de langue (clic sur une drapeau).
- Correction d'un bug lors de l'édition d'une réservation avec périodicité, si on édite une des réservations qui n'est pas la première de la série, et qu'on met la périodicité à "aucune", GRR signale un conflit avec la première réservation de la série.
- Correction d'un bug dans month_all.php et week_all.php : le retour, après suppression d'une réservation à partir d'une de ces pages, ne se faisait pas vers la page d'origine.
-Correction d'un bug : lors d'une recherche par un utilisateur non administrateur, si la
table j_area_user était vide (pas de gestionnaire), alors aucun résultat n'était trouvé.
-Correction d'un bug : lors de l'édition d'un rapport par un utilisateur non administrateur, si la table j_area_user était vide (pas de gestionnaire), alors aucun résultat n'était trouvé.